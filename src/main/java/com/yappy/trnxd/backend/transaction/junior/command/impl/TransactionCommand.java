package com.yappy.trnxd.backend.transaction.junior.command.impl;import com.yappy.trnxd.backend.transaction.junior.command.CommonCommand;import com.yappy.trnxd.backend.transaction.junior.enums.GenericCatalog;import com.yappy.trnxd.backend.transaction.junior.enums.TransactionError;import com.yappy.trnxd.backend.transaction.junior.mapper.StatusMapper;import com.yappy.trnxd.backend.transaction.junior.model.RequestDTO;import com.yappy.trnxd.backend.transaction.junior.model.ResponseDTO;import com.yappy.trnxd.backend.transaction.junior.model.TransactionRequestDTO;import com.yappy.trnxd.backend.transaction.junior.model.TransactionResponseDTO;import com.yappy.trnxd.backend.transaction.junior.util.TransactionUtil;import io.github.resilience4j.circuitbreaker.annotation.CircuitBreaker;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.factory.annotation.Qualifier;import org.springframework.stereotype.Component;@Slf4j@Component@Qualifier("transactionCommand")public class TransactionCommand implements CommonCommand<RequestDTO<TransactionRequestDTO>, ResponseDTO<TransactionResponseDTO>> {    private static final String COMMAND_NAME = "transactionCommand";    private StatusMapper statusMapper;    @Override    @CircuitBreaker(name = COMMAND_NAME, fallbackMethod = "executeFallback")    public ResponseDTO<TransactionResponseDTO> execute(RequestDTO<TransactionRequestDTO> request) {        var PROCESS_NAME = "Execute Transaction Command";        log.info(GenericCatalog.PREFIX_INIT_PROCESS.getMessage(), PROCESS_NAME);        var response = new ResponseDTO<TransactionResponseDTO>();        try {            var transaction = new TransactionResponseDTO();            transaction.setId(TransactionUtil.generateTransactionUUID());            transaction.setType(request.getBody().getType());            transaction.setStatus(request.getBody().getStatus());            transaction.setCreatedAt(request.getBody().getCreatedAt());            transaction.setUpdatedAt(request.getBody().getUpdatedAt());            response.setBody(transaction);            response.setStatus(statusMapper.toStatusDTO(TransactionError.SUCCESS));        } catch (Exception e) {            response.setStatus(statusMapper.toStatusDTO(TransactionError.INTERNAL_ERROR));        }        return response;    }    @Override    public void executeFallback(RequestDTO<TransactionRequestDTO> request) {        var PROCESS_NAME = "Execute Transaction Command Fallback";        log.info(GenericCatalog.PREFIX_INIT_PROCESS.getMessage(), PROCESS_NAME);        var response = new ResponseDTO<TransactionResponseDTO>();        response.setStatus(statusMapper.toStatusDTO(TransactionError.INTERNAL_ERROR));        log.error(GenericCatalog.PREFIX_ERROR_PROCESS.getMessage(), PROCESS_NAME, TransactionError.INTERNAL_ERROR.getMessage());    }}